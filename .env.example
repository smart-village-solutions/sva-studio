# ============================================================================
# Redis Configuration
# ============================================================================

# Standard Redis connection string (unencrypted for local development)
# REDIS_URL=redis://localhost:6379

# TLS-enabled Redis connection string (production recommended)
# REDIS_URL=rediss://localhost:6380

# Enable/disable TLS for Redis (automatically detected from REDIS_URL if starts with rediss://)
# TLS_ENABLED=true

# Paths to TLS certificates (optional, defaults to ./dev/redis-tls/ for development)
# REDIS_CA_PATH=/path/to/ca.pem
# REDIS_CERT_PATH=/path/to/redis.pem
# REDIS_KEY_PATH=/path/to/redis-key.pem

# ============================================================================
# Authentication (if using Redis ACL)
# ============================================================================

# Redis username (optional, requires Redis 6+)
# For session store with minimal permissions:
#   ACL SETUSER sessions on '>password' ~'session:*' ~'login_state:*' '+@read' '+@write' '+@keyspace'
# REDIS_USERNAME=sessions

# Redis password (optional, use with ACL for enhanced security)
# Set during ACL user creation with: ACL SETUSER sessions on '>password'
# REDIS_PASSWORD=sva-secure-password-2026

# ============================================================================
# Session Configuration
# ============================================================================

# Session TTL in seconds (default: 604800 = 7 days)
# SESSION_TTL=604800

# ============================================================================
# Token Encryption (AES-256-GCM)
# ============================================================================

# Base64-encoded 32-byte encryption key for token-at-rest encryption
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# ENCRYPTION_KEY=your-base64-encoded-32-byte-key

# Optional: Enable encryption for sensitive tokens (accessToken, refreshToken, idToken)
# When not set, tokens are stored unencrypted (not recommended for production)
# ENCRYPT_TOKENS=true

# ============================================================================
# OAuth/Keycloak Configuration
# ============================================================================

# Keycloak realm and client details
# KEYCLOAK_REALM=your-realm
# KEYCLOAK_CLIENT_ID=your-client-id
# KEYCLOAK_CLIENT_SECRET=your-client-secret

# ============================================================================
# Development Notes
# ============================================================================

# Generate TLS certificates locally:
#   cd dev/redis-tls
#   openssl genrsa -out ca-key.pem 2048
#   openssl req -new -x509 -days 365 -key ca-key.pem -out ca.pem -subj "/CN=Redis-CA"
#   openssl genrsa -out redis-key.pem 2048
#   openssl req -new -key redis-key.pem -out redis.csr -subj "/CN=localhost"
#   openssl x509 -req -days 365 -in redis.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out redis.pem

# Generate encryption key:
#   node -e "console.log('ENCRYPTION_KEY=' + require('crypto').randomBytes(32).toString('base64'))"
