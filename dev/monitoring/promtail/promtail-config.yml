server:
  http_listen_port: 3101
  grpc_listen_port: 0

positions:
  filename: /tmp/positions.yaml

clients:
  - url: http://loki:3100/loki/api/v1/push

scrape_configs:
  - job_name: "docker"
    static_configs:
      - targets: ["localhost"]
        labels:
          component: "docker"
          environment: "development"
          workspace_id: "local-dev"
          __path__: /var/lib/docker/containers/*/*-json.log
    pipeline_stages:
      - docker: {}
      - drop:
          older_than: 1h
          drop_counter_reason: stale_backfill
      - labelallow:
          - job
          - component
          - environment
          - workspace_id
          - level
          - stream
      - labeldrop:
          - user_id
          - session_id
          - email
          - request_id
          - token
          - authorization
          - api_key
          - secret
          - ip
          - password
          - card
          - credit
          - ssn
          - pii
          - sensitive
